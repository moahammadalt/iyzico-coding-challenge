(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{121:function(e,t,a){e.exports=a(321)},130:function(e,t,a){},135:function(e,t,a){},321:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(44),c=a.n(r),l=a(9),s=(a(130),a(10)),i=a(3),u=a(4),d=a(6),p=a(5),m=a(7),h=a(26),_=a.n(h),b=a(323),f=a(325),E=a(324),v=(a(135),a(32)),O=a.n(v),k=function(e){e?O.a.defaults.headers.common.authtoken=e:delete O.a.defaults.headers.common.authtoken},g=function(){return"".concat("localhost"===window.location.hostname||"smartgift-exercise.herokuapp.com"===window.location.hostname?"https://api-dev.smartgiftit.com":"https://production_host.com")},y=function(e,t,a,n){O.a.post("".concat(g()).concat(e),t).then(function(e){a&&a(e&&e.data&&e.data.data?e.data.data:e&&e.data?e.data:e)}).catch(function(e){return n?n(e):S(e)})},j=function(e,t,a){O.a.get("".concat(g()).concat(e)).then(function(e){t&&t(e&&e.data&&e.data.data?e.data.data:e&&e.data?e.data:e)}).catch(function(e){return a?a(e):S(e)})},S=function(e){var t=void 0!==e.response&&e.response.status?"[".concat(e.response.status,"]"):"";return e.response?_.a.error("Server error ".concat(t," , please contact the admin")):e.request?_.a.error("Server call could not be completed ".concat(t)):!1===e.status?_.a.warning('<i class="fas fa-times-circle"></i>  '+e.state,{timeout:5e3}):_.a.error("".concat(e))},C=a(322),w=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={products:[43448,53279,54890]},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return o.a.createElement("div",{className:"home-container container m-t-30"},o.a.createElement("h3",{className:"col-md-6 col-md-offset-3 m-b-30"},"Choose product: ",o.a.createElement("br",null)),this.state.products.map(function(e,t){return o.a.createElement("div",{key:t,className:"row"},o.a.createElement("div",{className:"col-md-6 col-md-offset-3"},o.a.createElement("div",{className:"panel panel-info"},o.a.createElement("div",{className:"panel-heading"},"product:"),o.a.createElement("div",{className:"panel-body"},o.a.createElement("h4",{className:"col-md-9"},e),o.a.createElement(C.a,{to:"/product/".concat(e)},"go to product "," >")))))}))}}]),t}(n.Component),N=function(e){function t(){return Object(i.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"text-center"},o.a.createElement("h1",null,"This path is not found"))}}]),t}(n.Component),D=function(e){function t(){return Object(i.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement("header",{className:"header",style:{backgroundColor:this.props.Color_palette.header_color}},o.a.createElement(C.a,{to:"/"},o.a.createElement("img",{className:"logo",src:"https://www.smartgiftit.com/wp-content/uploads/2018/12/sg-logo-smartgift-full-v1.svg",alt:"SmartGift"})))}}]),t}(n.Component),T=Object(l.b)(function(e){return e})(D),L=a(19),A=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={product_images:e.Selected_sku.images,current_image:0,background_position:"0% 0%"},a.handle_mouse_move=a.handle_mouse_move.bind(Object(L.a)(Object(L.a)(a))),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"handle_mouse_move",value:function(e){var t=e.target.getBoundingClientRect(),a=t.left,n=t.top,o=t.width,r=t.height,c=(e.pageX-a)/o*100,l=(e.pageY-n)/r*100;this.setState({background_position:"".concat(c,"% ").concat(l,"%")})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"image-container com-padding"},o.a.createElement("div",{className:"image-body"},o.a.createElement("figure",{onMouseMove:function(t){return e.handle_mouse_move(t)},style:{backgroundImage:"url(".concat(this.state.product_images[this.state.current_image].url,")"),backgroundPosition:this.state.background_position}},o.a.createElement("img",{className:"rounded",src:this.state.product_images[this.state.current_image].url,alt:"not available now"})),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("button",{className:"btn btn-default btn-sm m-r-15",disabled:this.props.Selected_sku.images.length===this.state.current_image+1,onClick:function(){return e.setState({current_image:e.state.current_image+1})}},"< ","previous"),o.a.createElement("button",{className:"btn btn-default btn-sm m-l-15",disabled:0===this.state.current_image,onClick:function(){return e.setState({current_image:e.state.current_image-1})}},"next "," >")))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{product_images:e.Selected_sku.images}}}]),t}(n.Component),M=Object(l.b)(function(e){return e})(A),P=function(e){function t(){return Object(i.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"name-container com-padding"},o.a.createElement("h2",null,this.props.Product.name))}}]),t}(n.Component),x=Object(l.b)(function(e){return e})(P),R=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={current_attrs:a.props.Product.selectedSku.attrs,refresh_attr:!1},a.change_sku=a.change_sku.bind(Object(L.a)(Object(L.a)(a))),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"change_sku",value:function(e,t){var a=this,n=Object(s.a)({},this.state.current_attrs);n[e]=t,this.setState({current_attrs:n},function(){var e=a.props.Product.skus.filter(function(e){var t=!0;for(var n in e.attrs)e.attrs[n]!==a.state.current_attrs[n]&&(t=!1);if(t)return e})[0];e?a.props.Set_selected_sku(e):S("Ops, something wrong in this combination, the selcted sku is not exist.")})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"attr-container com-padding"},Object.keys(this.props.Product.attrList).map(function(t,a){return o.a.createElement("div",{className:"attr-block",key:a},o.a.createElement("h3",{htmlFor:t},t,":"),o.a.createElement("select",{className:"form-control",value:e.props.Selected_sku.attrs[t],onChange:function(a){return e.change_sku(t,a.target.value)}},e.props.Product.attrList[t].map(function(e,t){return o.a.createElement("option",{key:t,value:e},e)})))}))}}]),t}(n.Component),I=Object(l.b)(function(e){return e},function(e){return{Set_selected_sku:function(t){e({type:"SET_SELECTED_SKU",payload:t})}}})(R),H=function(e){function t(){return Object(i.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"decs-container com-padding"},o.a.createElement("div",{className:"panel panel-default"},o.a.createElement("div",{className:"panel-heading"},"product details:"),o.a.createElement("div",{className:"panel-body text-center"},o.a.createElement("h5",{dangerouslySetInnerHTML:{__html:this.props.Product.shortDesc}}))))}}]),t}(n.Component),F=Object(l.b)(function(e){return e})(H),K=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).submit_product=a.submit_product.bind(Object(L.a)(Object(L.a)(a))),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"submit_product",value:function(){console.log(this.props.Selected_sku);var e=this.props.Selected_sku.orderable?"purchase has been completed":"sorry, this product is not available now, try another attributes",t=this.props.Selected_sku.orderable?"Success":"Fail";this.props.Show_modal({title:t,body:e})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"btn-container com-padding"},o.a.createElement("button",{className:"btn btn-primary btn-lg",onClick:function(){return e.submit_product()}},"Submit"))}}]),t}(n.Component),U=Object(l.b)(function(e){return e},function(e){return{Show_modal:function(t){e({type:"SET_MODAL",payload:t})}}})(K),B=a(72),X=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={show_header_color_picker:!1,show_background_color_picker:!1,header_color:e.Color_palette.header_color,background_color:e.Color_palette.background_color},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"color-palette-container com-padding"},o.a.createElement("div",{className:"col-md-6"},o.a.createElement("h4",{className:"color-picker-label"},"Header color: "),o.a.createElement("button",{onClick:function(){return e.setState({show_header_color_picker:!e.state.show_header_color_picker})}},o.a.createElement("span",{style:{backgroundColor:this.state.header_color},className:"color-btn"})),this.state.show_header_color_picker?o.a.createElement("div",{className:"color-popover"},o.a.createElement("div",{className:"color-cover",onClick:function(){return e.setState({show_header_color_picker:!1})}}),o.a.createElement(B.ChromePicker,{color:this.state.header_color,onChange:function(t){return e.props.Set_header_color(t.hex)}})):null),o.a.createElement("div",{className:"col-md-6"},o.a.createElement("h4",{className:"color-picker-label"},"Background color: "),o.a.createElement("button",{onClick:function(){return e.setState({show_background_color_picker:!e.state.show_background_color_picker})}},o.a.createElement("span",{style:{backgroundColor:this.state.background_color},className:"color-btn"})),this.state.show_background_color_picker?o.a.createElement("div",{className:"color-popover"},o.a.createElement("div",{className:"color-cover",onClick:function(){return e.setState({show_background_color_picker:!1})}}),o.a.createElement(B.ChromePicker,{color:this.state.background_color,onChangeComplete:function(t){return e.props.Set_background_color(t.hex)}})):null))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{header_color:e.Color_palette.header_color,background_color:e.Color_palette.background_color}}}]),t}(n.Component),G=Object(l.b)(function(e){return e},function(e){return{Set_header_color:function(t){e({type:"SET_HEADER_COLOR",payload:t})},Set_background_color:function(t){e({type:"SET_BACKGROUND_COLOR",payload:t})}}})(X),V=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={is_data_ready:!1},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params,a=Math.floor(Date.now()/1e3),n="/products/get-product-by-code/".concat(t.code),o=function(t){e.props.Set_selected_product(t),e.props.Set_selected_sku(t.selectedSku),e.setState({is_data_ready:!0}),e.props.Show_modal({title:"Welcome to SmartGift"}),setTimeout(function(){e.props.Close_modal()},1e3)};this.props.Cached_apis[n]&&this.props.Cached_apis[n].expire_at>a?o(this.props.Cached_apis[n].data):j(n,function(t){var r=Object(s.a)({},e.props.Cached_apis);r[n]={expire_at:a+3600,data:t},e.props.Set_cached_apis(r),o(t)})}},{key:"render",value:function(){return this.state.is_data_ready?o.a.createElement("div",{className:"product-container"},o.a.createElement("div",{className:"col-md-6"},o.a.createElement(M,null),o.a.createElement(F,null)),o.a.createElement("div",{className:"col-md-6 col-sm-12"},o.a.createElement(x,null),o.a.createElement(I,null),o.a.createElement(U,null),o.a.createElement(G,null))):o.a.createElement("div",{className:"loading"})}}]),t}(n.Component),Q=Object(l.b)(function(e){return e},function(e){return{Set_selected_product:function(t){e({type:"SET_SELECTED_PRODUCT",payload:t})},Set_selected_sku:function(t){e({type:"SET_SELECTED_SKU",payload:t})},Show_modal:function(t){e({type:"SET_MODAL",payload:t})},Close_modal:function(){e({type:"HIDE_MODAL"})},Set_cached_apis:function(t){e({type:"SET_CACHED_APIS",payload:t})}}})(V),q=function(e){function t(){return Object(i.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return this.props.Modal.show_modal?o.a.createElement("div",{className:"modal show-modal"},o.a.createElement("div",{className:"modal-content"},o.a.createElement("span",{className:"close-button",onClick:function(){return e.props.Close_modal()}},"\xd7"),o.a.createElement("h2",null,this.props.Modal.title),o.a.createElement("hr",null),o.a.createElement("h4",{className:"text-center"},this.props.Modal.body))):null}}]),t}(n.Component),W=Object(l.b)(function(e){return e},function(e){return{Close_modal:function(){e({type:"HIDE_MODAL"})}}})(q),J=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={authenticated:!1},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=Math.floor(Date.now()/1e3);if(this.props.Cached_apis["/auth"]&&this.props.Cached_apis["/auth"].expire_at>t)k(this.props.Cached_apis["/auth"].data),this.setState({authenticated:!0});else{y("/auth",{client_id:"FQtKaLZrnF5RQeNtrtkqopQmqi2O5CmsM!DRSKIK3ZzvT1rBLr",secret:"lLt5VBVb2EpdVXvAa6!XxVxL5AtXxQDCR!lvSHA7AonkFpP!!T"},function(a){e.props.Set_auth_token(a.token),k(a.token),e.setState({authenticated:!0});var n=Object(s.a)({},e.props.Cached_apis);n["/auth"]={expire_at:t+3600,data:a.token},e.props.Set_cached_apis(n)})}}},{key:"render",value:function(){return o.a.createElement("div",{className:"app-container",style:{backgroundColor:this.props.Color_palette.background_color}},o.a.createElement(b.a,null,o.a.createElement(o.a.Fragment,null,o.a.createElement(W,null),o.a.createElement(_.a,{stack:{limit:1},effect:"slide",beep:!1,position:"bottom-right",timeout:4e3,html:!0}),o.a.createElement(T,null),this.state.authenticated?o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,null,o.a.createElement(E.a,{exact:!0,path:"/",component:w}),o.a.createElement(E.a,{path:"/product/:code",component:Q}),o.a.createElement(E.a,{path:"*",exact:!0,component:N}))):o.a.createElement("div",{className:"loading"}))))}}]),t}(n.Component),Z=Object(l.b)(function(e){return Object(s.a)({},e)},function(e){return{Set_auth_token:function(t){e({type:"SET_AUTHENTICATION_TOKEN",payload:t})},Set_cached_apis:function(t){e({type:"SET_CACHED_APIS",payload:t})}}})(J);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var z=a(22),Y=a(120),$=a(46),ee=Object($.a)({key:"root",storage:Y.a,whitelist:["Cached_apis"]},{Product:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=Object(s.a)({},e);switch(t.type){case"SET_SELECTED_PRODUCT":a=Object(s.a)({},t.payload);break;default:a=e}return a||e},Selected_sku:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=Object(s.a)({},e);switch(t.type){case"SET_SELECTED_SKU":a=Object(s.a)({},t.payload);break;default:a=e}return a||e},Modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{show_modal:!1,title:"",body:""},t=arguments.length>1?arguments[1]:void 0,a=Object(s.a)({},e);switch(t.type){case"HIDE_MODAL":a={show_modal:!1,title:"",body:""};break;case"SET_MODAL":a.show_modal=!0,a.title=t.payload&&t.payload.title?t.payload.title:"",a.body=t.payload&&t.payload.body?t.payload.body:"";break;default:a=e}return a||e},Color_palette:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{header_color:"#ffffff",background_color:"#f8f8f8"},t=arguments.length>1?arguments[1]:void 0,a=Object(s.a)({},e);switch(t.type){case"SET_HEADER_COLOR":a.header_color=t.payload;break;case"SET_BACKGROUND_COLOR":a.background_color=t.payload;break;default:a=e}return a||e},Cached_apis:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=Object(s.a)({},e);switch(t.type){case"SET_CACHED_APIS":var n=Math.floor(Date.now()/1e3);for(var o in t.payload)t.payload[o].expire_at<n&&delete t.payload[o];a=Object(s.a)({},t.payload);break;default:a=e}return a||e}}),te=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||z.c,ae=Object(z.d)(ee,{},te()),ne=Object($.b)(ae),oe=a(119),re=o.a.createElement(oe.PersistGate,{persistor:ne},o.a.createElement(l.a,{store:ae},o.a.createElement(Z,null)));c.a.render(re,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[121,2,1]]]);
//# sourceMappingURL=main.afdf0a6a.chunk.js.map